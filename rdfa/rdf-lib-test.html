<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      Test result for rdf-lib.js
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.11.0.css">
    <script src="http://code.jquery.com/qunit/qunit-1.11.0.js"></script>
    <script src="rdf-lib.js"></script>
    <script>
    
    	//######################################################################
    	//             Test unit for addToIgnoreArray()
    	//###################################################################### 
    	
    	module("--- addToIgnoreArray() --- ")
    	// --------------------- Normal case -----------------------------------
		test("Blackbox test: Normal case", function () {
			expect(4); // Must have 2 tests.
		    var ignoreArray = [
				"shortcut icon",
				"apple-touch-icon"
			];
			
			var rdfLib = new RdfLib();
			rdfLib.addToIgnoreArray(ignoreArray);
			
			deepEqual( rdfLib.ignoreArray, ignoreArray,
					"Add first array" );
			
			ignoreArray = [
				"canonical",
				"nofollow"
			];		
			
			rdfLib.addToIgnoreArray(ignoreArray);
			deepEqual( rdfLib.ignoreArray.length, 4, 
					"Use one more array" );
			
			equal(rdfLib.ignoreArray[1], "apple-touch-icon", "Get element");
			equal(rdfLib.ignoreArray[2], "canonical", "Get another element");
		});
		
		// --------------------- Boundary case ---------------------------------
		test("Blackbox test: Boundary case", function () {
			expect(2);
			var rdfLib = new RdfLib();
			ignoreArray = [
				"canonical",
				"nofollow", 
				"stylesheet"
			];	
			
			rdfLib.addToIgnoreArray(ignoreArray);
			equal(rdfLib.ignoreArray[0], "canonical", "Left boundary");
			equal(rdfLib.ignoreArray[2], "stylesheet", "Right boundary");
		});
		
		// --------------------- Exception case --------------------------------
		test("Blackbox test: Exceptional case", function () {
			expect(3); // Must have 3 tests
			var rdfLib = new RdfLib();
			rdfLib.addToIgnoreArray();
			
			deepEqual( rdfLib.ignoreArray.length, 0,  
					"Call function without input params" );
			
			ignoreArray = [
				"canonical",
				"nofollow"
			];		
			
			rdfLib.addToIgnoreArray(ignoreArray);
			deepEqual( rdfLib.ignoreArray, ignoreArray, 
					"Use one more normal array" );
			
			rdfLib.addToIgnoreArray([]);
			deepEqual( rdfLib.ignoreArray.length,2, 
					"Then add new empty array" );
			
		});
		
		
		//######################################################################
    	//                    Test unit for isTriple()
    	//######################################################################
    	module("--- isTriple() --- ")
    	test("Blackbox test: Normal case", function () {
			var subject = {};
			var predicate = {};
			var object = {};
			var triple = {};
			
			// Init subject
			subject.key = "about";
			subject.value = "com.nxhoaf/#me";
			
			// Init predicate
			predicate.key = "property";
			predicate.value = "foaf:nick";
			
			// Init object
			object.key = "literal";
			object.value = "nxhoaf";
									
			triple.subject = subject;
			triple.predicate = predicate;
			triple.object = object;
			
			// Begin first test			
			var rdfLib = new RdfLib();
			ok(rdfLib.isTriple(triple), "Normal case")
			
			triple.object.key = object;
			
			
		});
		
		// Blackbox test: Boundary case", the same as whitebox test MC/DC
		
		test("Blackbox test: Exceptional case", function () {
			var subject = {};
			var predicate = {};
			var object = {};
			var triple = {};
			
			// Init subject
			subject.key = "strangerName";
			subject.value = "com.nxhoaf/#me";
			
			// Init predicate
			predicate.key = "property";
			predicate.value = "foaf:nick";
			
			// Init object
			object.key = "literal";
			object.value = "nxhoaf";
									
			triple.subject = subject;
			triple.predicate = predicate;
			triple.object = object;
			
			var rdfLib = new RdfLib();
		
			// First test
			equal(rdfLib.isTriple(triple), false, 
					"Stranger subject key");
					
			// Second test
			triple.subject.key = "about";
			triple.predicate.key = "strangerName";
			equal(rdfLib.isTriple(triple), false, 
					"Stranger predicate key");
					
			// Third test
			triple.predicate.key = "property";
			triple.object.key = "strangerName";
			equal(rdfLib.isTriple(triple), false, 
					"Stranger object key");
		});
		
		test("Whitebox test: Coverage MC/DC", function () {
			var subject = {};
			var predicate = {};
			var object = {};
			var triple = {};
			
			// Init subject
			subject.key = "strangerName";
			subject.value = "com.nxhoaf/#me";
			
			// Init predicate
			predicate.key = "property";
			predicate.value = "foaf:nick";
			
			// Init object
			object.key = "literal";
			object.value = "nxhoaf";
									
			triple.subject = subject;
			triple.predicate = predicate;
			triple.object = object;
			
			// First test: all are not null. Already done in 
			// "Blackbox test: Normal case"
			var rdfLib = new RdfLib();
			// Second test subject is null
			predicate.subject = null;
			equal(rdfLib.isTriple(triple), false, 
					"Subject is null");
					
			// Third test predicate is null
			triple.subject = subject;
			triple.predicate = null;
			equal(rdfLib.isTriple(triple), false, 
					"Predicate is null");
					
			// Fourth test subject is null
			triple.predicate = predicate;
			triple.object = null;
			equal(rdfLib.isTriple(triple), false, 
					"Object is null");
		});
     </script>
  </head>
  <body>

	<div id="qunit"></div>
	<div id="qunit-fixture">
	</div>
	
  </body>
</html>
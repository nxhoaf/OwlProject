<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta charset="utf-8">
    <title>Rolling Menu</title>
    <link rel="stylesheet" href="menu.css" type="text/css" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="./owl-constant.js"></script>
    <script src="./owl-lib.js"></script>
    <script src="./educ-program-lib.js"></script>
    <script src="./rolling-menu.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!--[if lte IE 6]>
	<style type="text/css">
		li {
			height: 1px;
			}
	</style>
	<![endif]-->
    <script type="text/javascript">
    <!--
    $(document).ready( function () {
		//----------------------------------------------------------------------
		// Handler function for onclick event
		//----------------------------------------------------------------------
		var subThemeOnClickHandler = function () {
			var log = document.getElementById("log");
			log.innerHTML = "";
			var knowledge = historyProgram.
					getKnowledgeOf(this.name, prefix);
			var knowledgeList = document.
					getElementById("knowledgeList");
			knowledgeList.innerHTML = ""; // clear content
			var knowledgeLabel = document.
					getElementById("knowledgeLabel");
			knowledgeLabel.style.visibility = 'visible';
			
			for (var k = 0; k < knowledge.length; k++) {
				
				var checkbox = document.createElement('input');
				checkbox.type = "checkbox";
				checkbox.name = "knowledge";
				checkbox.value = knowledge[k];
				checkbox.id = "knowledge_" + k;
				
				var label = document.createElement('label')
				label.htmlFor = "id";
				label.appendChild(document.createTextNode(
						knowledge[k][CONSTANT.LABEL]));
				
				var br = document.createElement("br");
					
				knowledgeList.appendChild(checkbox);
				knowledgeList.appendChild(label);
				knowledgeList.appendChild(br);
			}
		}
		
		var themeOnClickHandler = function() {
			var log = document.getElementById("log");
			log.innerHTML = "<b>" + this.textContent + "</b> " +
				" doesn't have sub elements";
			var knowledge = historyProgram.
						getKnowledgeOf(this.name, prefix);
			var knowledgeList = document.
					getElementById("knowledgeList");
			knowledgeList.innerHTML = ""; // clear content
			var knowledgeLabel = document.
					getElementById("knowledgeLabel");
			knowledgeLabel.style.visibility = 'visible';
			
			// Knowledge not found
			if ((knowledge == null) || (knowledge.length == 0)) {
				var notFound = document.createTextNode("None");
				knowledgeList.appendChild(notFound);
				
			} else {
				for (var k = 0; k < knowledge.length; k++) {
				
				var checkbox = document.createElement('input');
				checkbox.type = "checkbox";
				checkbox.name = "knowledge";
				checkbox.value = knowledge[k];
				checkbox.id = "knowledge_" + k;
				
				var label = document.createElement('label')
				label.htmlFor = "id";
				label.appendChild(document.createTextNode(
						knowledge[k][CONSTANT.LABEL]));
				
				var br = document.createElement("br");	
				knowledgeList.appendChild(checkbox);
				knowledgeList.appendChild(label);
				knowledgeList.appendChild(br);
				
				}
			}
		}
		
		//----------------------------------------------------------------------
		// Main program goes here.
		//----------------------------------------------------------------------
		// Init new History Owl object
		var historyOwl = new OwlObject();
		historyOwl.loadOwl("resource/programmeHistoire6emeV3.owl");
		
		// Init new History Program object   
		var historyProgram = new EducationProgram(historyOwl);
		
		// Create new rolling menu
		var rollingMenu = new RollingMenu(historyOwl);
		
		// Display the created rolling menu 
		var prefix = historyOwl.
				nameSpaces["Programme_Histoire_College_France"];
		var themeFilter = historyOwl.
				nameSpaces["organisation-systeme-scolaire-francais"] + 
				"programmeHistoire6eme";
		var historyMenu = historyProgram.createProgramMenu(themeFilter, prefix);
		
		rollingMenu.drawMenu(historyMenu, subThemeOnClickHandler, 
				themeOnClickHandler);
    } ) ;
    
    // -->
    </script>
</head>
<body>
    <ul id="navigation">
    </ul>
    <br>
    <br>
    <br>
    <h3> Log: </h3>
    <div id="log"></div>
    
    <h2 id="knowledgeLabel" style="visibility: hidden;">Required knowledge:</h2>
    <div id="knowledgeList"></div>   
</body>
</html>

<!--
<ul id="navigation">
    <li><a href="" title="">Item 1</a></li>
    <li class="toggleSubMenu"><span>Item 2</span>
        <ul class="subMenu">
            <li><a href="" title="">Item 2.1</a></li>
            <li><a href="" title="">Item 2.2</a></li>
            <li><a href="" title="">Item 2.3</a></li>
        </ul>
    </li>
    <li class="toggleSubMenu"><span>Item 3</span>
        <ul class="subMenu">
            <li><a href="" title="">Item 3.1</a></li>
            <li><a href="" title="">Item 3.2</a></li>
        </ul>
    </li>
    <li><a href="" title="">Item 4</a></li>
</ul> 
-->